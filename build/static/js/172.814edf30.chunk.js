"use strict";(self.webpackChunkasia_direct=self.webpackChunkasia_direct||[]).push([[172],{3172:(e,s,a)=>{a.r(s),a.d(s,{default:()=>C});var l=a(4050),t=a(6990),n=a(3193),c=a(8734),i=a(2221),o=a(7154),d=a(1962),r=a(5043),m=a(1434),h=a(7503),u=a(64),x=a.n(u),p=a(1888),f=a(6446),j=a(1906),v=a(5369),b=a(6971),N=a(4802),g=a(579);const w=10,_={PaperProps:{style:{maxHeight:224,width:250}}};function C(){const[e,s]=(0,r.useState)(!0),[a,u]=(0,r.useState)(1),[C,y]=(0,r.useState)([]),[A,k]=(0,r.useState)({}),[S,F]=(0,r.useState)(!1),[P,R]=(0,r.useState)([]),[T,E]=(0,r.useState)(!1),[L,I]=(0,r.useState)({staff_email:"",staff_name:"",new_password:""}),[M,B]=(0,r.useState)(""),[O,q]=(0,r.useState)(!1),[V,Y]=r.useState([]),U=(0,b.Zp)(),W=null===V||void 0===V?void 0:V.filter((e=>{var s,a,l,t,n,c;return(null===e||void 0===e||null===(s=e.email)||void 0===s||null===(a=s.toLowerCase())||void 0===a?void 0:a.includes(null===M||void 0===M?void 0:M.toLowerCase()))||(null===e||void 0===e||null===(l=e.full_name)||void 0===l||null===(t=l.toLowerCase())||void 0===t?void 0:t.includes(null===M||void 0===M?void 0:M.toLowerCase()))||(null===e||void 0===e||null===(n=e.staff_name)||void 0===n||null===(c=n.toLowerCase())||void 0===c?void 0:c.includes(null===M||void 0===M?void 0:M.toLowerCase()))})),D=Math.ceil(W.length/w),G=(a-1)*w,H=G+w,Q=W.slice(G,H),Z=()=>{F(!0),o.A.get("".concat("https://sisccltd.com/api/","staff-list")).then((e=>{F(!1),Y(e.data.data)})).catch((e=>{F(!1),console.log(e.response)}))},z=e=>{u(e)};(0,r.useEffect)((()=>{Z()}),[]);const J=e=>{const{name:s,value:a}=e.target;I((e=>({...e,[s]:a})))},K=e=>{const s=V.map((s=>s.id===e?{...s,status:1-s.status}:s));Y(s)},X=e=>{o.A.post("".concat("https://sisccltd.com/api/","change-status"),{user_id:e}).then((e=>{h.oR.success(e.data.message)})).catch((e=>{console.log(e.response)}))},$=[{value:"0",label:"No Role Assign"},{value:"1",label:"Quoting Team"},{value:"2",label:"Operation controller"},{value:"3",label:"Customs Clearing"},{value:"4",label:"Sales Team"},{value:"5",label:"Customer Service"},{value:"6",label:"Shipping Controller"},{value:"7",label:"Warehousing"},{value:"8",label:"Accounts"}],ee=e=>{const s=e.target.value;if(s.includes("all")){const e=P.length===$.length;R(e?[]:$.map((e=>e.value)))}else R(s)},se=$.length>0&&P.length===$.length,ae=()=>{const e={staff_email:L.staff_email,staff_name:L.staff_name,roles:P,new_password:L.new_password};o.A.post("".concat("https://sisccltd.com/api/","add-staff"),e).then((e=>{h.oR.success(e.data.message),Z(),q(!1)})).catch((e=>{h.oR.error(e.response.data.message)}))},le=e=>{const{name:s,value:a}=e.target;y({...C,[s]:a})},te=()=>{E(!1)};return(0,g.jsx)(g.Fragment,{children:S?(0,g.jsxs)("div",{className:"loader-container",children:[(0,g.jsx)("div",{className:"loader"}),(0,g.jsx)("p",{className:"loader-text",children:"Updating... This may take some time"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"wpWrapper",children:(0,g.jsx)("div",{className:"container-fluid",children:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"row manageFreight",children:(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsx)("div",{className:"",children:(0,g.jsx)("h4",{className:"freight_hd",children:"Add Staff"})}),(0,g.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,g.jsx)("div",{className:"",children:(0,g.jsx)("input",{className:"px-2 py-1 rounded ",type:"text",placeholder:"Search",value:M,onChange:e=>{B(e.target.value),u(1)}})}),(0,g.jsx)("div",{className:"ms-2",children:(0,g.jsx)("button",{type:"button",onClick:()=>{q(!0)},children:"Add"})})]})]})})}),O&&(0,g.jsx)("div",{className:"custom-modal",children:(0,g.jsxs)("div",{className:"custom-modal-content",children:[(0,g.jsxs)("div",{className:"custom-modal-header",children:[(0,g.jsx)("h5",{className:"custom-modal-title",children:"Add Staff"}),(0,g.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{q(!1)},children:(0,g.jsx)(N.A,{})})]}),(0,g.jsxs)("div",{className:"custom-modal-body",children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"form-label mb-2 md_staff",children:"Email address"}),(0,g.jsx)("input",{type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com",onChange:J,name:"staff_email"}),(0,g.jsx)("p",{className:"text-danger",children:A.staff_email})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"form-label mb-2 md_staff",children:"Full Name"}),(0,g.jsxs)("div",{className:"col-sm-12",children:[(0,g.jsx)("input",{type:"text",onChange:J,name:"staff_name",className:"form-control",id:"inputText",placeholder:"Enter your Name"}),(0,g.jsx)("p",{className:"text-danger",children:A.staff_name})]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"form-label mb-2 md_staff",children:"Assign Roles"}),(0,g.jsx)(n.A,{style:{width:"100%"},children:(0,g.jsxs)(i.A,{id:"demo-multiple-checkbox",multiple:!0,value:P,onChange:ee,input:(0,g.jsx)(l.A,{}),renderValue:e=>e.map((e=>{var s;return null===(s=$.find((s=>s.value===e)))||void 0===s?void 0:s.label})).join(", "),MenuProps:_,className:"country_sel",placeholder:"Assign Roles",children:[(0,g.jsxs)(t.A,{value:"all",children:[(0,g.jsx)(d.A,{checked:se,indeterminate:P.length>0&&P.length<$.length}),(0,g.jsx)(c.A,{primary:"Select All"})]}),$.map((e=>(0,g.jsxs)(t.A,{value:e.value,children:[(0,g.jsx)(d.A,{checked:P.includes(e.value)}),(0,g.jsx)(c.A,{primary:e.label})]},e.value)))]})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"inputPassword",className:"form-label mb-2 md_staff",children:"New Password"}),(0,g.jsxs)("div",{className:"col-sm-12",children:[(0,g.jsx)("input",{type:"password",className:"form-control",name:"new_password",onChange:J,id:"inputPassword",placeholder:"password"}),(0,g.jsx)("p",{className:"text-danger mb-0",children:A.new_password})]})]})]}),(0,g.jsx)("div",{className:"custom-modal-footer",children:(0,g.jsx)("button",{type:"button",className:"btn text-white",onClick:()=>{(e=>{let s={};e.staff_email||(s.staff_email="Email is required"),e.staff_name||(s.staff_name="Name is required"),e.new_password||(s.new_password="Password is required"),0===P.length&&(s.roles="Please select at least one role"),k(s),0===Object.keys(s).length&&ae()})(L)},style:{backgroundColor:"#1b2245"},children:"Add Member"})})]})}),(0,g.jsxs)("div",{className:"table-responsive mt-3",children:[(0,g.jsxs)("table",{className:"table table-striped tableICon",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",children:"Sr.No."}),(0,g.jsx)("th",{scope:"col",children:"Full Name"}),(0,g.jsx)("th",{scope:"col",children:"Email"}),(0,g.jsx)("th",{scope:"col",children:"Status"}),(0,g.jsx)("th",{scope:"col",children:"View"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{style:{border:"none"},children:Q&&Q.length>0&&Q.map(((s,a)=>(0,g.jsxs)("tr",{className:"border-bottom",children:[(0,g.jsx)("th",{children:G+a+1}),(0,g.jsx)("td",{children:s.full_name}),(0,g.jsx)("td",{children:s.email}),(0,g.jsx)("td",{children:1===s.status?(0,g.jsxs)("label",{className:"switch round ".concat(e?"checked":""),children:[(0,g.jsx)("input",{type:"checkbox",checked:!e,onClick:()=>{X(s.id)},onChange:()=>{K(s.id)}}),(0,g.jsx)("span",{className:"slider round"})]}):(0,g.jsxs)("label",{className:"switch round ".concat(e?"checked":""),children:[(0,g.jsx)("input",{type:"checkbox",checked:e,onClick:()=>{X(s.id)},onChange:()=>{K(s.id)}}),(0,g.jsx)("span",{className:"slider round"})]})}),(0,g.jsx)("td",{children:(0,g.jsx)("fa",{className:"fa fa-eye",style:{cursor:"pointer"},onClick:()=>{(e=>{U("/Admin/staff-details",{state:{data:e}})})(s)}})}),(0,g.jsx)("td",{children:(0,g.jsxs)("div",{className:"action_btn1 d-flex align-items-center",children:[(0,g.jsx)(v.uO9,{onClick:()=>{(e=>{const s=V.find((s=>s.id===e));s&&y({staff_id:e,staff_email:s.email,staff_name:s.full_name,roles:s.roles||[]}),E(!0)})(s.id)},style:{color:"rgb(27 34 69)",marginRight:"10px",width:"20px",height:"15px",cursor:"pointer"}}),(0,g.jsx)(m.F23,{className:"text-danger",style:{cursor:"pointer"},onClick:()=>{(async e=>{x().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((s=>{s.isConfirmed&&(o.A.post("".concat("https://sisccltd.com/api/","delete-staff"),{staff_id:e}).then((e=>{h.oR.success(e.data.message),Z()})).catch((e=>{h.oR.error(e.response.data.message)})),x().fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))}))})(s.id)}})]})})]},a)))})]}),(0,g.jsxs)("div",{className:"text-center d-flex justify-content-end align-items-center",children:[(0,g.jsxs)("button",{disabled:1===a,className:"bg_page",onClick:()=>z(a-1),children:[" ",(0,g.jsx)("i",{className:"fi fi-rr-angle-small-left page_icon"})]}),(0,g.jsx)("span",{className:"mx-2",children:"Page ".concat(a," of ").concat(D)}),(0,g.jsx)("button",{disabled:a===D,className:"bg_page",onClick:()=>z(a+1),children:(0,g.jsx)("i",{className:"fi fi-rr-angle-small-right page_icon"})})]})]})]}),(0,g.jsx)(p.A,{open:T,onClose:te,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,g.jsxs)(f.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,g.jsxs)("div",{className:"modal-header",children:[(0,g.jsx)("h2",{id:"modal-modal-title",children:"Edit Staff"}),(0,g.jsx)("button",{className:"btn btn-close",onClick:te,children:(0,g.jsx)(N.A,{})})]}),(0,g.jsxs)("div",{className:"newModalGap",children:[(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"ware_label",children:"Email address"}),(0,g.jsx)("input",{type:"email",className:"form-control mb-3",value:null===C||void 0===C?void 0:C.staff_email,id:"exampleFormControlInput1",placeholder:"name@example.com",onChange:le,name:"staff_email"})]})}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"ware_label",children:"Full Name"}),(0,g.jsx)("input",{type:"text",onChange:le,name:"staff_name",value:null===C||void 0===C?void 0:C.staff_name,className:"form-control mb-3",id:"inputText",placeholder:"Enter your Name"})]})}),(0,g.jsx)("div",{className:"row mb-3 ",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"multipleSelect",className:"ware_label",children:"Assign Roles"}),(0,g.jsx)("br",{}),(0,g.jsx)(n.A,{className:"w-100",children:(0,g.jsx)(i.A,{multiple:!0,value:P,onChange:ee,input:(0,g.jsx)(l.A,{}),renderValue:e=>e.map((e=>{var s;return null===(s=$.find((s=>s.value===e)))||void 0===s?void 0:s.label})).join(", "),MenuProps:_,className:"country_sel",children:$.map((e=>(0,g.jsxs)(t.A,{value:e.value,children:[(0,g.jsx)(d.A,{checked:P.indexOf(e.value)>-1}),(0,g.jsx)(c.A,{primary:e.label})]},e.value)))})}),A.roles&&(0,g.jsx)("p",{className:"text-danger mb-0",children:A.roles})]})}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"inputPassword",className:"ware_label",children:"New Password"}),(0,g.jsx)("input",{type:"password",className:"form-control mb-3",name:"new_password",onChange:le,id:"inputPassword",placeholder:"password"}),(0,g.jsx)("p",{className:"text-danger mb-0",children:A.new_password})]})}),(0,g.jsx)("div",{className:"text-center mt-2 unsetLt",children:(0,g.jsx)(j.A,{variant:"contained",className:"submit_btn",onClick:()=>{console.log(C);const e={staff_id:C.staff_id,email:C.staff_email,staff_name:C.staff_name,roles:P,password:C.new_password};P&&C.new_password?o.A.post("".concat("https://sisccltd.com/api/","update-staff"),e).then((e=>{h.oR.success(e.data.message),te(),Z(),q(!1)})).catch((e=>{h.oR.error(e.response.data.message)})):h.oR.error("Update Roles and Password")},children:"Submit"})})]})]})})]})})}),(0,g.jsx)(h.N9,{})]})})}}}]);
//# sourceMappingURL=172.814edf30.chunk.js.map