"use strict";(self.webpackChunkasia_direct=self.webpackChunkasia_direct||[]).push([[480],{4480:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(7154),l=t(5043),i=t(1434),n=t(7503),c=t(64),d=t.n(c),r=t(579);const o=()=>{const[e,s]=(0,l.useState)(""),[t,c]=(0,l.useState)({send_to:"",user_id:"",title:"",description:""}),[o,h]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[u,j]=(0,l.useState)([]),[p,f]=(0,l.useState)(""),[b,N]=(0,l.useState)([]),v=(0,l.useRef)(),g=(0,l.useRef)(),_=(0,l.useRef)(),y=()=>{a.A.post("".concat("https://sisccltd.com/api/","notification-list")).then((e=>{s(e.data.data)}))};(0,l.useEffect)((()=>{y()}),[]);const C=e=>{const{name:s,value:a}=e.target;c({...t,[s]:a}),"send_to"===s&&(h("4"===a),x("3"===a))},S=()=>{a.A.post("".concat("https://sisccltd.com/api/","send-notification"),t).then((e=>{n.oR.success(e.data.message),v.current.value="",g.current.value="",_.current.value="",y()}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"wpWrapper",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("div",{className:"card ",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{className:"row manageFreight",children:(0,r.jsx)("div",{className:"col-12",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-item-center",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)("h4",{className:"freight_hd",children:"Notification"})}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:"Send Notification"})})]})})}),(0,r.jsx)("div",{className:"modal fade modalBorder",id:"exampleModal",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Add Notification"}),(0,r.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"all_user",value:"2",ref:v,name:"send_to",onChange:C}),(0,r.jsx)("label",{for:"all_user",className:"ms-1",children:"All User"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"All_Staff",value:"1",name:"send_to",onChange:C}),(0,r.jsx)("label",{for:"All_Staff",className:"ms-1",children:"All Staff"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"Particular_user",value:"3",onClick:()=>{a.A.get("".concat("https://sisccltd.com/api/","clientlist")).then((e=>{j(e.data.data)}))},name:"send_to",onChange:C}),(0,r.jsx)("label",{for:"Particular_user",className:"ms-1",children:"Particular User"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"Particular_staff",value:"4",onClick:()=>{a.A.get("".concat("https://sisccltd.com/api/","staff-list")).then((e=>{N(e.data.data)}))},name:"send_to",onChange:C}),(0,r.jsx)("label",{for:"Particular_staff",className:"ms-1",children:"Particular Staff"})]})]}),m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mt-3",children:"Particular User"}),(0,r.jsx)("br",{}),(0,r.jsxs)("select",{name:"user_id",className:"w-100 p-2 rounded",onChange:C,children:[(0,r.jsx)("option",{className:"ps-2",children:"Select..."}),u.length>0&&u.map(((e,s)=>(0,r.jsx)("option",{value:e.id,children:e.client_name},s)))]})]}),o&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mt-3",children:"Particular Staff"}),(0,r.jsx)("br",{}),(0,r.jsxs)("select",{name:"user_id",className:"w-100 p-2 border-1 rounded",onChange:C,children:[(0,r.jsx)("option",{children:"Select..."}),b.length>0&&b.map(((e,s)=>(0,r.jsx)("option",{value:e.id,children:e.full_name},s)))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Title"}),(0,r.jsx)("input",{type:"text",onChange:C,ref:g,name:"title",placeholder:"Title",className:"form-control"}),(0,r.jsx)("p",{className:"text-danger",children:p.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Message"}),(0,r.jsx)("textarea",{type:"text",ref:_,onChange:C,placeholder:"Message",name:"description",className:"form-control"}),(0,r.jsx)("p",{className:"text-danger mb-0",children:p.description})]})]}),(0,r.jsx)("div",{className:"modal-footer",children:(0,r.jsx)("button",{type:"button",onClick:()=>{(e=>{let s={};e.title||(s.title="Title is required"),e.description||(s.description="Description is required"),s.title||s.description||S(),f(s)})(t)},className:"btn btn-primary",children:"Send Notification"})})]})})}),(0,r.jsx)("div",{className:"table-responsive mt-2",children:(0,r.jsxs)("table",{className:"table table-striped tableICon",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"Sr.No."}),(0,r.jsx)("th",{scope:"col",children:"Title"}),(0,r.jsx)("th",{scope:"col",children:"Message"}),(0,r.jsx)("th",{scope:"col",children:"Date"}),(0,r.jsx)("th",{scope:"col",children:"Action"})]})}),(0,r.jsx)("tbody",{style:{border:"none"},children:e.length>0&&e.map(((e,s)=>{const t=new Date(null===e||void 0===e?void 0:e.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});return(0,r.jsxs)("tr",{className:"border-bottom",children:[(0,r.jsx)("th",{children:s+1}),(0,r.jsx)("td",{children:e.title}),(0,r.jsx)("td",{children:e.description}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"action_btn1",children:(0,r.jsx)(i.F23,{className:"text-danger",onClick:()=>{return s=e.id,void d().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((e=>{e.isConfirmed&&(a.A.post("".concat("https://sisccltd.com/api/","delete-notification"),{notification_id:s}).then((e=>{n.oR.success(e.data.message),y()})).catch((e=>{n.oR.error(e.response.data.message)})),d().fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))}));var s},style:{cursor:"pointer"}})})})]},s)}))})]})})]})}),(0,r.jsx)(n.N9,{})]})})})}}}]);
//# sourceMappingURL=480.f8978b72.chunk.js.map