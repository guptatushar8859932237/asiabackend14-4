"use strict";(self.webpackChunkasia_direct=self.webpackChunkasia_direct||[]).push([[172],{3172:(e,s,a)=>{a.r(s),a.d(s,{default:()=>C});var l=a(4050),t=a(8356),n=a(6990),o=a(3193),c=a(8734),i=a(2221),d=a(7154),r=a(1962),m=a(5043),h=a(1434),u=a(7503),x=a(64),p=a.n(x),f=a(1888),j=a(6446),b=a(1906),v=a(5369),N=a(6971),g=a(579);const w=10,_={PaperProps:{style:{maxHeight:224,width:250}}};function C(){const[e,s]=(0,m.useState)(!0),[a,x]=(0,m.useState)(1),[C,y]=(0,m.useState)([]),[A,k]=(0,m.useState)({}),[S,F]=(0,m.useState)(!1),[R,P]=(0,m.useState)([]),[T,E]=(0,m.useState)(!1),[I,L]=(0,m.useState)({staff_email:"",staff_name:"",new_password:""}),[O,B]=(0,m.useState)(""),[M,q]=(0,m.useState)(!1),[V,Y]=m.useState([]),U=(0,N.Zp)(),W=null===V||void 0===V?void 0:V.filter((e=>{var s,a,l,t,n,o;return(null===e||void 0===e||null===(s=e.email)||void 0===s||null===(a=s.toLowerCase())||void 0===a?void 0:a.includes(null===O||void 0===O?void 0:O.toLowerCase()))||(null===e||void 0===e||null===(l=e.full_name)||void 0===l||null===(t=l.toLowerCase())||void 0===t?void 0:t.includes(null===O||void 0===O?void 0:O.toLowerCase()))||(null===e||void 0===e||null===(n=e.staff_name)||void 0===n||null===(o=n.toLowerCase())||void 0===o?void 0:o.includes(null===O||void 0===O?void 0:O.toLowerCase()))})),D=Math.ceil(W.length/w),H=(a-1)*w,Q=H+w,Z=W.slice(H,Q),z=()=>{F(!0),d.A.get("".concat("https://sisccltd.com/api/","staff-list")).then((e=>{F(!1),Y(e.data.data)})).catch((e=>{F(!1),console.log(e.response)}))},G=e=>{x(e)};(0,m.useEffect)((()=>{z()}),[]);const J=e=>{const{name:s,value:a}=e.target;L((e=>({...e,[s]:a})))},K=e=>{const s=V.map((s=>s.id===e?{...s,status:1-s.status}:s));Y(s)},X=e=>{d.A.post("".concat("https://sisccltd.com/api/","change-status"),{user_id:e}).then((e=>{u.oR.success(e.data.message)})).catch((e=>{console.log(e.response)}))},$=[{value:"0",label:"No Role Assign"},{value:"1",label:"Quoting Team"},{value:"2",label:"Operation controller"},{value:"3",label:"Customs Clearing"},{value:"4",label:"Sales Team"},{value:"5",label:"Customer Service"},{value:"6",label:"Shipping Controller"},{value:"7",label:"Warehousing"},{value:"8",label:"Accounts"}],ee=e=>{P(e.target.value)},se=()=>{const e={staff_email:I.staff_email,staff_name:I.staff_name,roles:R,new_password:I.new_password};d.A.post("".concat("https://sisccltd.com/api/","add-staff"),e).then((e=>{u.oR.success(e.data.message),z(),q(!1)})).catch((e=>{u.oR.error(e.response.data.message)}))},ae=e=>{const{name:s,value:a}=e.target;y({...C,[s]:a})},le=()=>{E(!1)};return(0,g.jsx)(g.Fragment,{children:S?(0,g.jsxs)("div",{class:"loader-container",children:[(0,g.jsx)("div",{class:"loader"}),(0,g.jsx)("p",{class:"loader-text",children:"Updating... This may take some time"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"wpWrapper",children:(0,g.jsx)("div",{className:"container-fluid",children:(0,g.jsxs)("div",{className:"card",children:[(0,g.jsxs)("div",{className:"card-body",children:[(0,g.jsx)("div",{className:"row manageFreight",children:(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsx)("div",{className:"",children:(0,g.jsx)("h4",{className:"freight_hd",children:"Add Staff"})}),(0,g.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,g.jsx)("div",{className:"",children:(0,g.jsx)("input",{className:"px-2 py-1 rounded ",type:"text",placeholder:"Search",value:O,onChange:e=>{B(e.target.value),x(1)}})}),(0,g.jsx)("div",{className:"ms-2",children:(0,g.jsx)("button",{type:"button",onClick:()=>{q(!0)},children:"Add"})})]})]})})}),M&&(0,g.jsx)("div",{className:"custom-modal",children:(0,g.jsxs)("div",{className:"custom-modal-content",children:[(0,g.jsxs)("div",{className:"custom-modal-header",children:[(0,g.jsx)("h5",{className:"custom-modal-title",children:"Add Staff"}),(0,g.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{q(!1)}})]}),(0,g.jsxs)("div",{className:"custom-modal-body",children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"form-label mb-2 md_staff",children:"Email address"}),(0,g.jsx)("input",{type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com",onChange:J,name:"staff_email"}),(0,g.jsx)("p",{className:"text-danger",children:A.staff_email})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"form-label mb-2 md_staff",children:"Full Name"}),(0,g.jsxs)("div",{className:"col-sm-12",children:[(0,g.jsx)("input",{type:"text",onChange:J,name:"staff_name",className:"form-control",id:"inputText",placeholder:"Enter your Name"}),(0,g.jsx)("p",{className:"text-danger",children:A.staff_name})]})]}),(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"form-label mb-2 md_staff",children:"Assign Roles"}),(0,g.jsxs)(o.A,{style:{width:"100%"},children:[(0,g.jsx)(t.A,{id:"demo-multiple-checkbox-label",children:"Assign Roles"}),(0,g.jsx)(i.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:R,onChange:ee,input:(0,g.jsx)(l.A,{label:"Assign Roles"}),renderValue:e=>e.map((e=>{var s;return null===(s=$.find((s=>s.value===e)))||void 0===s?void 0:s.label})).join(", "),MenuProps:_,className:"country_sel",children:$.map((e=>(0,g.jsxs)(n.A,{value:e.value,children:[(0,g.jsx)(r.A,{checked:R.indexOf(e.value)>-1}),(0,g.jsx)(c.A,{primary:e.label})]},e.value)))})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"inputPassword",className:"form-label mb-2 md_staff",children:"New Password"}),(0,g.jsxs)("div",{className:"col-sm-12",children:[(0,g.jsx)("input",{type:"password",className:"form-control",name:"new_password",onChange:J,id:"inputPassword",placeholder:"password"}),(0,g.jsx)("p",{className:"text-danger mb-0",children:A.new_password})]})]})]}),(0,g.jsx)("div",{className:"custom-modal-footer",children:(0,g.jsx)("button",{type:"button",className:"btn text-white",onClick:()=>{(e=>{let s={};e.staff_email||(s.staff_email="Email is required"),e.staff_name||(s.staff_name="Name is required"),e.new_password||(s.new_password="Password is required"),0===R.length&&(s.roles="Please select at least one role"),k(s),0===Object.keys(s).length&&se()})(I)},style:{backgroundColor:"#1b2245"},children:"Add Member"})})]})}),(0,g.jsxs)("div",{className:"table-responsive mt-2",children:[(0,g.jsxs)("table",{className:"table table-striped tableICon",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",children:"Sr.No."}),(0,g.jsx)("th",{scope:"col",children:"Full Name"}),(0,g.jsx)("th",{scope:"col",children:"Email"}),(0,g.jsx)("th",{scope:"col",children:"Status"}),(0,g.jsx)("th",{scope:"col",children:"View"}),(0,g.jsx)("th",{scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{style:{border:"none"},children:Z&&Z.length>0&&Z.map(((s,a)=>(0,g.jsxs)("tr",{className:"border-bottom",children:[(0,g.jsx)("th",{children:H+a+1}),(0,g.jsx)("td",{children:s.full_name}),(0,g.jsx)("td",{children:s.email}),(0,g.jsx)("td",{children:1===s.status?(0,g.jsxs)("label",{className:"switch round ".concat(e?"checked":""),children:[(0,g.jsx)("input",{type:"checkbox",checked:!e,onClick:()=>{X(s.id)},onChange:()=>{K(s.id)}}),(0,g.jsx)("span",{className:"slider round"})]}):(0,g.jsxs)("label",{className:"switch round ".concat(e?"checked":""),children:[(0,g.jsx)("input",{type:"checkbox",checked:e,onClick:()=>{X(s.id)},onChange:()=>{K(s.id)}}),(0,g.jsx)("span",{className:"slider round"})]})}),(0,g.jsx)("td",{children:(0,g.jsx)("fa",{className:"fa fa-eye",style:{cursor:"pointer"},onClick:()=>{(e=>{U("/Admin/staff-details",{state:{data:e}})})(s)}})}),(0,g.jsx)("td",{children:(0,g.jsxs)("div",{className:"action_btn1 d-flex align-items-center",children:[(0,g.jsx)(v.uO9,{onClick:()=>{(e=>{const s=V.find((s=>s.id===e));s&&y({staff_id:e,staff_email:s.email,staff_name:s.full_name,roles:s.roles||[]}),E(!0)})(s.id)},style:{color:"rgb(27 34 69)",marginRight:"10px",width:"20px",height:"15px",cursor:"pointer"}}),(0,g.jsx)(h.F23,{className:"text-danger",style:{cursor:"pointer"},onClick:()=>{(async e=>{p().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((s=>{s.isConfirmed&&(d.A.post("".concat("https://sisccltd.com/api/","delete-staff"),{staff_id:e}).then((e=>{u.oR.success(e.data.message),z()})).catch((e=>{u.oR.error(e.response.data.message)})),p().fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))}))})(s.id)}})]})})]},a)))})]}),(0,g.jsxs)("div",{className:"text-center d-flex justify-content-end align-items-center",children:[(0,g.jsx)("button",{disabled:1===a,className:"bg_page",onClick:()=>G(a-1),children:(0,g.jsx)("i",{class:"fi fi-rr-angle-small-left page_icon"})}),(0,g.jsx)("span",{className:"mx-2",children:"Page ".concat(a," of ").concat(D)}),(0,g.jsx)("button",{disabled:a===D,className:"bg_page",onClick:()=>G(a+1),children:(0,g.jsx)("i",{class:"fi fi-rr-angle-small-right page_icon"})})]})]})]}),(0,g.jsx)(f.A,{open:T,onClose:le,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,g.jsxs)(j.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:450,width:450,overflow:"scroll",bgcolor:"background.paper",boxShadow:24,p:4},children:[(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"ware_label",children:"Email address"}),(0,g.jsx)("input",{type:"email",className:"form-control mb-3",value:null===C||void 0===C?void 0:C.staff_email,id:"exampleFormControlInput1",placeholder:"name@example.com",onChange:ae,name:"staff_email"})]})}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"inputText",className:"ware_label",children:"Full Name"}),(0,g.jsx)("input",{type:"text",onChange:ae,name:"staff_name",value:null===C||void 0===C?void 0:C.staff_name,className:"form-control mb-3",id:"inputText",placeholder:"Enter your Name"})]})}),(0,g.jsx)("div",{className:"row mb-3 ",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"multipleSelect",className:"ware_label",children:"Assign Roles"}),(0,g.jsx)("br",{}),(0,g.jsxs)(o.A,{className:"w-100",children:[(0,g.jsx)(t.A,{id:"roles-label",children:"Roles"}),(0,g.jsx)(i.A,{labelId:"roles-label",multiple:!0,value:R,onChange:ee,input:(0,g.jsx)(l.A,{label:"Roles"}),renderValue:e=>e.map((e=>{var s;return null===(s=$.find((s=>s.value===e)))||void 0===s?void 0:s.label})).join(", "),MenuProps:_,className:"country_sel",children:$.map((e=>(0,g.jsxs)(n.A,{value:e.value,children:[(0,g.jsx)(r.A,{checked:R.indexOf(e.value)>-1}),(0,g.jsx)(c.A,{primary:e.label})]},e.value)))})]}),A.roles&&(0,g.jsx)("p",{className:"text-danger mb-0",children:A.roles})]})}),(0,g.jsx)("div",{className:"row",children:(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsx)("label",{htmlFor:"inputPassword",className:"ware_label",children:"New Password"}),(0,g.jsx)("input",{type:"password",className:"form-control mb-3",name:"new_password",onChange:ae,id:"inputPassword",placeholder:"password"}),(0,g.jsx)("p",{className:"text-danger mb-0",children:A.new_password})]})}),(0,g.jsx)("div",{className:"text-center mt-2",children:(0,g.jsx)(b.A,{variant:"contained",className:"submit_btn",onClick:()=>{console.log(C);const e={staff_id:C.staff_id,email:C.staff_email,staff_name:C.staff_name,roles:R,password:C.new_password};R&&C.new_password?d.A.post("".concat("https://sisccltd.com/api/","update-staff"),e).then((e=>{u.oR.success(e.data.message),le(),z(),q(!1)})).catch((e=>{u.oR.error(e.response.data.message)})):u.oR.error("Update Roles and Password")},children:"Submit"})})]})})]})})}),(0,g.jsx)(u.N9,{})]})})}}}]);
//# sourceMappingURL=172.5ecc9c2f.chunk.js.map